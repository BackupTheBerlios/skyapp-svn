<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>SA PHP Application Framework: public_html/sa-v_0_3/lib/Smarty-2.6.14/unit_test/test_cases.php Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.6 -->
<div class="tabs">
  <ul>
    <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="namespaces.html"><span>Namespaces</span></a></li>
    <li><a href="classes.html"><span>Classes</span></a></li>
    <li id="current"><a href="files.html"><span>Files</span></a></li>
  </ul></div>
<h1>public_html/sa-v_0_3/lib/Smarty-2.6.14/unit_test/test_cases.php</h1><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 &lt;?php
<a name="l00002"></a>00002 
<a name="l00003"></a>00003 require_once './config.php';
<a name="l00004"></a>00004 require_once SMARTY_DIR . '<a class="code" href="classSmarty.html">Smarty</a>.class.php';
<a name="l00005"></a>00005 require_once 'PHPUnit.php';
<a name="l00006"></a>00006 
<a name="l00007"></a><a class="code" href="classObj.html">00007</a> <span class="keyword">class </span><a class="code" href="classObj.html">Obj</a> {
<a name="l00008"></a><a class="code" href="classObj.html#ff22f1f0b54c34452c4b8ebc89d78c0b">00008</a>     var <a class="code" href="classObj.html#ff22f1f0b54c34452c4b8ebc89d78c0b">$val</a> = 'val';
<a name="l00009"></a><a class="code" href="classObj.html#89cf44f49dc79cc24c52238d36fc2052">00009</a>     var <a class="code" href="classObj.html#89cf44f49dc79cc24c52238d36fc2052">$arr</a> = array('one' =&gt; 'one', 'two' =&gt; 2);
<a name="l00010"></a><a class="code" href="classObj.html#9fd1d0bd089535ec33ce0bf46881b511">00010</a>     var <a class="code" href="classObj.html#9fd1d0bd089535ec33ce0bf46881b511">$ten</a> = 10;
<a name="l00011"></a>00011 
<a name="l00012"></a><a class="code" href="classObj.html#20be9745d06fc713a183e983cf8e9f53">00012</a>     function <a class="code" href="classObj.html#20be9745d06fc713a183e983cf8e9f53">meth</a>($a=<span class="stringliteral">"a"</span>, $b=<span class="stringliteral">"b"</span>) {
<a name="l00013"></a>00013         <span class="keywordflow">return</span> <span class="stringliteral">"$a:$b"</span>;
<a name="l00014"></a>00014     }
<a name="l00015"></a>00015 
<a name="l00016"></a><a class="code" href="classObj.html#cf467b2a9e134f282ea2a217e457489c">00016</a>     function <a class="code" href="classObj.html#cf467b2a9e134f282ea2a217e457489c">six</a>() {
<a name="l00017"></a>00017         <span class="keywordflow">return</span> 6;
<a name="l00018"></a>00018     }
<a name="l00019"></a>00019 }
<a name="l00020"></a>00020 
<a name="l00021"></a>00021     
<a name="l00022"></a><a class="code" href="classSmartyTest.html">00022</a> <span class="keyword">class </span><a class="code" href="classSmartyTest.html">SmartyTest</a> <span class="keyword">extends</span> PHPUnit_TestCase {   
<a name="l00023"></a>00023     <span class="comment">// contains the object handle of the string class</span>
<a name="l00024"></a><a class="code" href="classSmartyTest.html#3fe3cd1be99cee4ba1cea756e1088f14">00024</a>     var <a class="code" href="classSmartyTest.html#3fe3cd1be99cee4ba1cea756e1088f14">$abc</a>;
<a name="l00025"></a>00025     <span class="comment">// contains the last triggered error's errorlevel</span>
<a name="l00026"></a><a class="code" href="classSmartyTest.html#55e2943c8dcbb72df18a119c02a7bc16">00026</a>     var <a class="code" href="classSmartyTest.html#55e2943c8dcbb72df18a119c02a7bc16">$errorlevel</a>;
<a name="l00027"></a>00027 
<a name="l00028"></a>00028     <span class="comment">// constructor of the test suite</span>
<a name="l00029"></a><a class="code" href="classSmartyTest.html#07254d13dd998656c0d031286b212854">00029</a>     function <a class="code" href="classSmartyTest.html#07254d13dd998656c0d031286b212854">SmartyTest</a>($name) {
<a name="l00030"></a>00030        $this-&gt;PHPUnit_TestCase($name);
<a name="l00031"></a>00031     }
<a name="l00032"></a>00032 
<a name="l00033"></a>00033     <span class="comment">// called before the test functions will be executed    </span>
<a name="l00034"></a>00034     <span class="comment">// this function is defined in PHPUnit_TestCase and overwritten </span>
<a name="l00035"></a>00035     <span class="comment">// here</span>
<a name="l00036"></a><a class="code" href="classSmartyTest.html#4fe4cf3f37284cfe67b37b1482558cb0">00036</a>     function <a class="code" href="classSmartyTest.html#4fe4cf3f37284cfe67b37b1482558cb0">setUp</a>() {
<a name="l00037"></a>00037         <span class="comment">// create a new instance of String with the</span>
<a name="l00038"></a>00038         <span class="comment">// string 'abc'</span>
<a name="l00039"></a>00039         $this-&gt;smarty = <span class="keyword">new</span> <a class="code" href="classSmarty.html">Smarty</a>;
<a name="l00040"></a>00040     }
<a name="l00041"></a>00041     <span class="comment">// called after the test functions are executed    </span>
<a name="l00042"></a>00042     <span class="comment">// this function is defined in PHPUnit_TestCase and overwritten </span>
<a name="l00043"></a>00043     <span class="comment">// here    </span>
<a name="l00044"></a><a class="code" href="classSmartyTest.html#795255770080098458939401ae0a2472">00044</a>     function <a class="code" href="classSmartyTest.html#795255770080098458939401ae0a2472">tearDown</a>() {
<a name="l00045"></a>00045         <span class="comment">// delete your instance</span>
<a name="l00046"></a>00046         unset($this-&gt;smarty);
<a name="l00047"></a>00047     }
<a name="l00048"></a>00048     
<a name="l00049"></a>00049     <span class="comment">// dummy errorhandler for functions that are supposed to call trigger_error()</span>
<a name="l00050"></a><a class="code" href="classSmartyTest.html#8adfe0ee301f830bb21d7bcd8933240e">00050</a>     function <a class="code" href="classSmartyTest.html#8adfe0ee301f830bb21d7bcd8933240e">error_handler</a>(<a class="code" href="classSmartyTest.html#55e2943c8dcbb72df18a119c02a7bc16">$errorlevel</a>) {
<a name="l00051"></a>00051         <span class="keywordflow">if</span> (<a class="code" href="classSmartyTest.html#55e2943c8dcbb72df18a119c02a7bc16">$errorlevel</a>) $this-&gt;errorlevel = <a class="code" href="classSmartyTest.html#55e2943c8dcbb72df18a119c02a7bc16">$errorlevel</a>;
<a name="l00052"></a>00052     }
<a name="l00053"></a>00053 
<a name="l00054"></a>00054     <span class="comment">/* DIRECTORY TESTS */</span>
<a name="l00055"></a>00055     
<a name="l00056"></a>00056     <span class="comment">// test that template_dir exists</span>
<a name="l00057"></a><a class="code" href="classSmartyTest.html#9a5343227e8f388c2140654f40b17173">00057</a>     function <a class="code" href="classSmartyTest.html#9a5343227e8f388c2140654f40b17173">test_template_dir_exists</a>() {
<a name="l00058"></a>00058         $this-&gt;assertTrue(file_exists($this-&gt;smarty-&gt;template_dir));                       
<a name="l00059"></a>00059     }
<a name="l00060"></a>00060     <span class="comment">// test that template_dir is a directory</span>
<a name="l00061"></a><a class="code" href="classSmartyTest.html#881626105c81f3cbd4e3c785cb884704">00061</a>     function <a class="code" href="classSmartyTest.html#881626105c81f3cbd4e3c785cb884704">test_template_dir_is_dir</a>() {
<a name="l00062"></a>00062         $this-&gt;assertTrue(is_dir($this-&gt;smarty-&gt;template_dir));                       
<a name="l00063"></a>00063     }
<a name="l00064"></a>00064     <span class="comment">// test that template_dir is readable</span>
<a name="l00065"></a><a class="code" href="classSmartyTest.html#9c50685f120f7d1f379abb7dc22564c7">00065</a>     function <a class="code" href="classSmartyTest.html#9c50685f120f7d1f379abb7dc22564c7">test_template_dir_is_readable</a>() {
<a name="l00066"></a>00066         $this-&gt;assertTrue(is_readable($this-&gt;smarty-&gt;template_dir));                       
<a name="l00067"></a>00067     }
<a name="l00068"></a>00068     <span class="comment">// test that config_dir exists</span>
<a name="l00069"></a><a class="code" href="classSmartyTest.html#993a7bd4ba062735564ac3c468b000ac">00069</a>     function <a class="code" href="classSmartyTest.html#993a7bd4ba062735564ac3c468b000ac">test_config_dir_exists</a>() {
<a name="l00070"></a>00070         $this-&gt;assertTrue(file_exists($this-&gt;smarty-&gt;config_dir));                       
<a name="l00071"></a>00071     }
<a name="l00072"></a>00072     <span class="comment">// test that config_dir is a directory</span>
<a name="l00073"></a><a class="code" href="classSmartyTest.html#021a7feddfc89d0776c80af5b16928c6">00073</a>     function <a class="code" href="classSmartyTest.html#021a7feddfc89d0776c80af5b16928c6">test_config_dir_is_dir</a>() {
<a name="l00074"></a>00074         $this-&gt;assertTrue(is_dir($this-&gt;smarty-&gt;config_dir));                       
<a name="l00075"></a>00075     }
<a name="l00076"></a>00076     <span class="comment">// test that config_dir is readable</span>
<a name="l00077"></a><a class="code" href="classSmartyTest.html#04effedfbc09e6111485b4183646f8b4">00077</a>     function <a class="code" href="classSmartyTest.html#04effedfbc09e6111485b4183646f8b4">test_config_dir_is_readable</a>() {
<a name="l00078"></a>00078         $this-&gt;assertTrue(is_readable($this-&gt;smarty-&gt;config_dir));                       
<a name="l00079"></a>00079     }
<a name="l00080"></a>00080     <span class="comment">// test that compile_dir exists</span>
<a name="l00081"></a><a class="code" href="classSmartyTest.html#71f529c1ce4f93f35e3bb4f245cd6b3e">00081</a>     function <a class="code" href="classSmartyTest.html#71f529c1ce4f93f35e3bb4f245cd6b3e">test_compile_dir_exists</a>() {
<a name="l00082"></a>00082         $this-&gt;assertTrue(file_exists($this-&gt;smarty-&gt;compile_dir));                       
<a name="l00083"></a>00083     }
<a name="l00084"></a>00084     <span class="comment">// test that compile_dir is a directory</span>
<a name="l00085"></a><a class="code" href="classSmartyTest.html#dca2ac09bed15b8c9f8ccdfc54ce2bdb">00085</a>     function <a class="code" href="classSmartyTest.html#dca2ac09bed15b8c9f8ccdfc54ce2bdb">test_compile_dir_is_dir</a>() {
<a name="l00086"></a>00086         $this-&gt;assertTrue(is_dir($this-&gt;smarty-&gt;compile_dir));                       
<a name="l00087"></a>00087     }
<a name="l00088"></a>00088     <span class="comment">// test that compile_dir is readable</span>
<a name="l00089"></a><a class="code" href="classSmartyTest.html#0aeff987484fadc6acacb53a2136a8cc">00089</a>     function <a class="code" href="classSmartyTest.html#0aeff987484fadc6acacb53a2136a8cc">test_compile_dir_is_readable</a>() {
<a name="l00090"></a>00090         $this-&gt;assertTrue(is_readable($this-&gt;smarty-&gt;compile_dir));                       
<a name="l00091"></a>00091     }
<a name="l00092"></a>00092     <span class="comment">// test that compile_dir is writable</span>
<a name="l00093"></a><a class="code" href="classSmartyTest.html#60f48d01fee1e95d1318ed046e8b62c3">00093</a>     function <a class="code" href="classSmartyTest.html#60f48d01fee1e95d1318ed046e8b62c3">test_compile_dir_is_writable</a>() {
<a name="l00094"></a>00094         $this-&gt;assertTrue(is_writable($this-&gt;smarty-&gt;compile_dir));                       
<a name="l00095"></a>00095     }
<a name="l00096"></a>00096     <span class="comment">// test that cache_dir exists</span>
<a name="l00097"></a><a class="code" href="classSmartyTest.html#6e602b8e6dd9d696dac4c5afb8012c4d">00097</a>     function <a class="code" href="classSmartyTest.html#6e602b8e6dd9d696dac4c5afb8012c4d">test_cache_dir_exists</a>() {
<a name="l00098"></a>00098         $this-&gt;assertTrue(file_exists($this-&gt;smarty-&gt;cache_dir));                       
<a name="l00099"></a>00099     }
<a name="l00100"></a>00100     <span class="comment">// test that cache_dir is a directory</span>
<a name="l00101"></a><a class="code" href="classSmartyTest.html#cb8909f5907879b7e8e21ea7e887fc10">00101</a>     function <a class="code" href="classSmartyTest.html#cb8909f5907879b7e8e21ea7e887fc10">test_cache_dir_is_dir</a>() {
<a name="l00102"></a>00102         $this-&gt;assertTrue(is_dir($this-&gt;smarty-&gt;cache_dir));                       
<a name="l00103"></a>00103     }
<a name="l00104"></a>00104     <span class="comment">// test that cache_dir is readable</span>
<a name="l00105"></a><a class="code" href="classSmartyTest.html#19ce277ecbd3a75cc42a01a343118548">00105</a>     function <a class="code" href="classSmartyTest.html#19ce277ecbd3a75cc42a01a343118548">test_cache_dir_is_readable</a>() {
<a name="l00106"></a>00106         $this-&gt;assertTrue(is_readable($this-&gt;smarty-&gt;cache_dir));                       
<a name="l00107"></a>00107     }
<a name="l00108"></a>00108     <span class="comment">// test that cache_dir is writable</span>
<a name="l00109"></a><a class="code" href="classSmartyTest.html#c67eaec32058f7e1198d4268342454ff">00109</a>     function <a class="code" href="classSmartyTest.html#c67eaec32058f7e1198d4268342454ff">test_cache_dir_is_writable</a>() {
<a name="l00110"></a>00110         $this-&gt;assertTrue(is_writable($this-&gt;smarty-&gt;cache_dir));                       
<a name="l00111"></a>00111     }
<a name="l00112"></a>00112 
<a name="l00113"></a>00113     <span class="comment">/* METHOD EXISTS TESTS */</span>
<a name="l00114"></a><a class="code" href="classSmartyTest.html#bb55077fe54861259281636012e82fda">00114</a>     function <a class="code" href="classSmartyTest.html#bb55077fe54861259281636012e82fda">test_assign_method_exists</a>() {
<a name="l00115"></a>00115         $this-&gt;assertTrue(method_exists($this-&gt;smarty, 'assign'));
<a name="l00116"></a>00116     }
<a name="l00117"></a><a class="code" href="classSmartyTest.html#94b297f1bdae60e0c56cf3948ad9560d">00117</a>     function <a class="code" href="classSmartyTest.html#94b297f1bdae60e0c56cf3948ad9560d">test_assign_by_ref_method_exists</a>() {
<a name="l00118"></a>00118         $this-&gt;assertTrue(method_exists($this-&gt;smarty, 'assign_by_ref'));
<a name="l00119"></a>00119     }
<a name="l00120"></a><a class="code" href="classSmartyTest.html#2c13b4e717ee42d1c9c99a0f713d03c5">00120</a>     function <a class="code" href="classSmartyTest.html#2c13b4e717ee42d1c9c99a0f713d03c5">test_append_method_exists</a>() {
<a name="l00121"></a>00121         $this-&gt;assertTrue(method_exists($this-&gt;smarty, 'append'));
<a name="l00122"></a>00122     }
<a name="l00123"></a><a class="code" href="classSmartyTest.html#7c64acd1893f0d32be285dbb109848ab">00123</a>     function <a class="code" href="classSmartyTest.html#7c64acd1893f0d32be285dbb109848ab">test_append_by_ref_method_exists</a>() {
<a name="l00124"></a>00124         $this-&gt;assertTrue(method_exists($this-&gt;smarty, 'append_by_ref'));
<a name="l00125"></a>00125     }
<a name="l00126"></a><a class="code" href="classSmartyTest.html#d8b27d9caa25b498466e11ca4611d569">00126</a>     function <a class="code" href="classSmartyTest.html#d8b27d9caa25b498466e11ca4611d569">test_clear_assign_method_exists</a>() {
<a name="l00127"></a>00127         $this-&gt;assertTrue(method_exists($this-&gt;smarty, 'clear_assign'));
<a name="l00128"></a>00128     }
<a name="l00129"></a><a class="code" href="classSmartyTest.html#8f53de5a701384607543fab4052b1ca8">00129</a>     function <a class="code" href="classSmartyTest.html#8f53de5a701384607543fab4052b1ca8">test_register_function_method_exists</a>() {
<a name="l00130"></a>00130         $this-&gt;assertTrue(method_exists($this-&gt;smarty, 'register_function'));
<a name="l00131"></a>00131     }
<a name="l00132"></a><a class="code" href="classSmartyTest.html#e66a78d373fbc7a501d4befa06c4382f">00132</a>     function <a class="code" href="classSmartyTest.html#e66a78d373fbc7a501d4befa06c4382f">test_unregister_function_method_exists</a>() {
<a name="l00133"></a>00133         $this-&gt;assertTrue(method_exists($this-&gt;smarty, 'unregister_function'));
<a name="l00134"></a>00134     }
<a name="l00135"></a><a class="code" href="classSmartyTest.html#c73db6465cc538280a4c7aba2211fc40">00135</a>     function <a class="code" href="classSmartyTest.html#c73db6465cc538280a4c7aba2211fc40">test_register_object_method_exists</a>() {
<a name="l00136"></a>00136         $this-&gt;assertTrue(method_exists($this-&gt;smarty, 'register_object'));
<a name="l00137"></a>00137     }
<a name="l00138"></a><a class="code" href="classSmartyTest.html#b44c4ae5e9635917973c00ff111796e9">00138</a>     function <a class="code" href="classSmartyTest.html#b44c4ae5e9635917973c00ff111796e9">test_unregister_object_method_exists</a>() {
<a name="l00139"></a>00139         $this-&gt;assertTrue(method_exists($this-&gt;smarty, 'unregister_object'));
<a name="l00140"></a>00140     }
<a name="l00141"></a><a class="code" href="classSmartyTest.html#0c111d2fa257586796c1e1020b349e8d">00141</a>     function <a class="code" href="classSmartyTest.html#0c111d2fa257586796c1e1020b349e8d">test_register_block_method_exists</a>() {
<a name="l00142"></a>00142         $this-&gt;assertTrue(method_exists($this-&gt;smarty, 'register_block'));
<a name="l00143"></a>00143     }
<a name="l00144"></a><a class="code" href="classSmartyTest.html#d5020278700b8e2457e5a9a730ad1964">00144</a>     function <a class="code" href="classSmartyTest.html#d5020278700b8e2457e5a9a730ad1964">test_unregister_block_method_exists</a>() {
<a name="l00145"></a>00145         $this-&gt;assertTrue(method_exists($this-&gt;smarty, 'unregister_block'));
<a name="l00146"></a>00146     }
<a name="l00147"></a><a class="code" href="classSmartyTest.html#2b2cef6e28cff8dbdae593207b5e42b2">00147</a>     function <a class="code" href="classSmartyTest.html#2b2cef6e28cff8dbdae593207b5e42b2">test_register_compiler_function_method_exists</a>() {
<a name="l00148"></a>00148         $this-&gt;assertTrue(method_exists($this-&gt;smarty, 'register_compiler_function'));
<a name="l00149"></a>00149     }
<a name="l00150"></a><a class="code" href="classSmartyTest.html#f243e09d6ec02db5b8f652ff28f7fc07">00150</a>     function <a class="code" href="classSmartyTest.html#f243e09d6ec02db5b8f652ff28f7fc07">test_unregister_compiler_function_method_exists</a>() {
<a name="l00151"></a>00151         $this-&gt;assertTrue(method_exists($this-&gt;smarty, 'unregister_compiler_function'));
<a name="l00152"></a>00152     }
<a name="l00153"></a><a class="code" href="classSmartyTest.html#f6a05605924adfa07ed3e018e046bad3">00153</a>     function <a class="code" href="classSmartyTest.html#f6a05605924adfa07ed3e018e046bad3">test_register_modifier_method_exists</a>() {
<a name="l00154"></a>00154         $this-&gt;assertTrue(method_exists($this-&gt;smarty, 'register_modifier'));
<a name="l00155"></a>00155     }
<a name="l00156"></a><a class="code" href="classSmartyTest.html#e1299861bcfaff654d19c3c2482b6835">00156</a>     function <a class="code" href="classSmartyTest.html#e1299861bcfaff654d19c3c2482b6835">test_unregister_modifier_method_exists</a>() {
<a name="l00157"></a>00157         $this-&gt;assertTrue(method_exists($this-&gt;smarty, 'unregister_modifier'));
<a name="l00158"></a>00158     }
<a name="l00159"></a><a class="code" href="classSmartyTest.html#565fd4f65498ebaadeff3283f106f4f7">00159</a>     function <a class="code" href="classSmartyTest.html#565fd4f65498ebaadeff3283f106f4f7">test_register_resource_method_exists</a>() {
<a name="l00160"></a>00160         $this-&gt;assertTrue(method_exists($this-&gt;smarty, 'register_resource'));
<a name="l00161"></a>00161     }
<a name="l00162"></a><a class="code" href="classSmartyTest.html#764f6b324008848406184212aaf1b4ec">00162</a>     function <a class="code" href="classSmartyTest.html#764f6b324008848406184212aaf1b4ec">test_unregister_resource_method_exists</a>() {
<a name="l00163"></a>00163         $this-&gt;assertTrue(method_exists($this-&gt;smarty, 'unregister_resource'));
<a name="l00164"></a>00164     }
<a name="l00165"></a><a class="code" href="classSmartyTest.html#6f4fe4ea8854133a1c53748887ad1036">00165</a>     function <a class="code" href="classSmartyTest.html#6f4fe4ea8854133a1c53748887ad1036">test_register_prefilter_method_exists</a>() {
<a name="l00166"></a>00166         $this-&gt;assertTrue(method_exists($this-&gt;smarty, 'register_prefilter'));
<a name="l00167"></a>00167     }
<a name="l00168"></a><a class="code" href="classSmartyTest.html#af5c51be604cfb059c1f491670c7d115">00168</a>     function <a class="code" href="classSmartyTest.html#af5c51be604cfb059c1f491670c7d115">test_unregister_prefilter_method_exists</a>() {
<a name="l00169"></a>00169         $this-&gt;assertTrue(method_exists($this-&gt;smarty, 'unregister_prefilter'));
<a name="l00170"></a>00170     }
<a name="l00171"></a><a class="code" href="classSmartyTest.html#eae088f2e4a449afda0b8a5b6dd8952d">00171</a>     function <a class="code" href="classSmartyTest.html#eae088f2e4a449afda0b8a5b6dd8952d">test_register_postfilter_method_exists</a>() {
<a name="l00172"></a>00172         $this-&gt;assertTrue(method_exists($this-&gt;smarty, 'register_postfilter'));
<a name="l00173"></a>00173     }
<a name="l00174"></a><a class="code" href="classSmartyTest.html#bb912424e13e8da7daf00c10f13567f6">00174</a>     function <a class="code" href="classSmartyTest.html#bb912424e13e8da7daf00c10f13567f6">test_unregister_postfilter_method_exists</a>() {
<a name="l00175"></a>00175         $this-&gt;assertTrue(method_exists($this-&gt;smarty, 'unregister_postfilter'));
<a name="l00176"></a>00176     }
<a name="l00177"></a><a class="code" href="classSmartyTest.html#afe350e112e3691cf4765c3852fdca2c">00177</a>     function <a class="code" href="classSmartyTest.html#afe350e112e3691cf4765c3852fdca2c">test_register_outputfilter_method_exists</a>() {
<a name="l00178"></a>00178         $this-&gt;assertTrue(method_exists($this-&gt;smarty, 'register_outputfilter'));
<a name="l00179"></a>00179     }
<a name="l00180"></a><a class="code" href="classSmartyTest.html#c6c48737c5b51e22e427d70186f9a62a">00180</a>     function <a class="code" href="classSmartyTest.html#c6c48737c5b51e22e427d70186f9a62a">test_unregister_outputfilter_method_exists</a>() {
<a name="l00181"></a>00181         $this-&gt;assertTrue(method_exists($this-&gt;smarty, 'unregister_outputfilter'));
<a name="l00182"></a>00182     }
<a name="l00183"></a><a class="code" href="classSmartyTest.html#df0e3ebfc1ae814ada112a60e1bfd1c6">00183</a>     function <a class="code" href="classSmartyTest.html#df0e3ebfc1ae814ada112a60e1bfd1c6">test_load_filter_method_exists</a>() {
<a name="l00184"></a>00184         $this-&gt;assertTrue(method_exists($this-&gt;smarty, 'load_filter'));
<a name="l00185"></a>00185     }
<a name="l00186"></a><a class="code" href="classSmartyTest.html#6cb14e969c75fbf94cebe5d605abbba6">00186</a>     function <a class="code" href="classSmartyTest.html#6cb14e969c75fbf94cebe5d605abbba6">test_clear_cache_method_exists</a>() {
<a name="l00187"></a>00187         $this-&gt;assertTrue(method_exists($this-&gt;smarty, 'clear_cache'));
<a name="l00188"></a>00188     }
<a name="l00189"></a><a class="code" href="classSmartyTest.html#dc6a1d0c5178fcd0fdb65ab13eded4b5">00189</a>     function <a class="code" href="classSmartyTest.html#dc6a1d0c5178fcd0fdb65ab13eded4b5">test_clear_all_cache_method_exists</a>() {
<a name="l00190"></a>00190         $this-&gt;assertTrue(method_exists($this-&gt;smarty, 'clear_all_cache'));
<a name="l00191"></a>00191     }
<a name="l00192"></a><a class="code" href="classSmartyTest.html#c04c152d17553a90a701ec0863ae3663">00192</a>     function <a class="code" href="classSmartyTest.html#c04c152d17553a90a701ec0863ae3663">test_is_cached_method_exists</a>() {
<a name="l00193"></a>00193         $this-&gt;assertTrue(method_exists($this-&gt;smarty, 'is_cached'));
<a name="l00194"></a>00194     }
<a name="l00195"></a><a class="code" href="classSmartyTest.html#5f0ae68cd4a83ac5168fe8aa689c4d57">00195</a>     function <a class="code" href="classSmartyTest.html#5f0ae68cd4a83ac5168fe8aa689c4d57">test_clear_all_assign_method_exists</a>() {
<a name="l00196"></a>00196         $this-&gt;assertTrue(method_exists($this-&gt;smarty, 'clear_all_assign'));
<a name="l00197"></a>00197     }
<a name="l00198"></a><a class="code" href="classSmartyTest.html#31e1327b08af59346cdfaf66183ea1d2">00198</a>     function <a class="code" href="classSmartyTest.html#31e1327b08af59346cdfaf66183ea1d2">test_clear_compiled_tpl_method_exists</a>() {
<a name="l00199"></a>00199         $this-&gt;assertTrue(method_exists($this-&gt;smarty, 'clear_compiled_tpl'));
<a name="l00200"></a>00200     }
<a name="l00201"></a><a class="code" href="classSmartyTest.html#b165b960ba361938974bb9cb977582dc">00201</a>     function <a class="code" href="classSmartyTest.html#b165b960ba361938974bb9cb977582dc">test_template_exists_method_exists</a>() {
<a name="l00202"></a>00202         $this-&gt;assertTrue(method_exists($this-&gt;smarty, 'template_exists'));
<a name="l00203"></a>00203     }
<a name="l00204"></a><a class="code" href="classSmartyTest.html#983ef408b7926f6165258f16d5d4b4ac">00204</a>     function <a class="code" href="classSmartyTest.html#983ef408b7926f6165258f16d5d4b4ac">test_get_template_vars_method_exists</a>() {
<a name="l00205"></a>00205         $this-&gt;assertTrue(method_exists($this-&gt;smarty, 'get_template_vars'));
<a name="l00206"></a>00206     }
<a name="l00207"></a><a class="code" href="classSmartyTest.html#1edfb885a72c076e72290ff81dd80f3f">00207</a>     function <a class="code" href="classSmartyTest.html#1edfb885a72c076e72290ff81dd80f3f">test_get_config_vars_method_exists</a>() {
<a name="l00208"></a>00208         $this-&gt;assertTrue(method_exists($this-&gt;smarty, 'get_config_vars'));
<a name="l00209"></a>00209     }
<a name="l00210"></a><a class="code" href="classSmartyTest.html#872b462f92b3923d913b0a867632b47a">00210</a>     function <a class="code" href="classSmartyTest.html#872b462f92b3923d913b0a867632b47a">test_trigger_error_method_exists</a>() {
<a name="l00211"></a>00211         $this-&gt;assertTrue(method_exists($this-&gt;smarty, 'trigger_error'));
<a name="l00212"></a>00212     }
<a name="l00213"></a><a class="code" href="classSmartyTest.html#d2a92b7cc102b7b1788e65b984b321ba">00213</a>     function <a class="code" href="classSmartyTest.html#d2a92b7cc102b7b1788e65b984b321ba">test_display_method_exists</a>() {
<a name="l00214"></a>00214         $this-&gt;assertTrue(method_exists($this-&gt;smarty, 'display'));
<a name="l00215"></a>00215     }
<a name="l00216"></a><a class="code" href="classSmartyTest.html#609a5a8e4610d44372d07a5786570422">00216</a>     function <a class="code" href="classSmartyTest.html#609a5a8e4610d44372d07a5786570422">test_fetch_method_exists</a>() {
<a name="l00217"></a>00217         $this-&gt;assertTrue(method_exists($this-&gt;smarty, 'fetch'));
<a name="l00218"></a>00218     }
<a name="l00219"></a><a class="code" href="classSmartyTest.html#01092c4f4ed31239d7fe6b1f15296a03">00219</a>     function <a class="code" href="classSmartyTest.html#01092c4f4ed31239d7fe6b1f15296a03">test_config_load_method_exists</a>() {
<a name="l00220"></a>00220         $this-&gt;assertTrue(method_exists($this-&gt;smarty, 'config_load'));
<a name="l00221"></a>00221     }
<a name="l00222"></a><a class="code" href="classSmartyTest.html#223ec70e0fec30aa7df9ad18ec2fe9d2">00222</a>     function <a class="code" href="classSmartyTest.html#223ec70e0fec30aa7df9ad18ec2fe9d2">test_get_registered_object_method_exists</a>() {
<a name="l00223"></a>00223         $this-&gt;assertTrue(method_exists($this-&gt;smarty, 'get_registered_object'));
<a name="l00224"></a>00224     }
<a name="l00225"></a><a class="code" href="classSmartyTest.html#cb9380a74a70f5626788330578a4fb10">00225</a>     function <a class="code" href="classSmartyTest.html#cb9380a74a70f5626788330578a4fb10">test_clear_config_method_exists</a>() {
<a name="l00226"></a>00226         $this-&gt;assertTrue(method_exists($this-&gt;smarty, 'clear_config'));
<a name="l00227"></a>00227     }
<a name="l00228"></a><a class="code" href="classSmartyTest.html#74fb96576492ca1f153d5793132078c9">00228</a>     function <a class="code" href="classSmartyTest.html#74fb96576492ca1f153d5793132078c9">test_get_plugin_filepath</a>() {
<a name="l00229"></a>00229         $this-&gt;assertTrue(method_exists($this-&gt;smarty, '_get_plugin_filepath'));
<a name="l00230"></a>00230     }
<a name="l00231"></a>00231 
<a name="l00232"></a>00232     
<a name="l00233"></a><a class="code" href="classSmartyTest.html#55f5d00910a45546707b6d5e27d9ea73">00233</a>     function <a class="code" href="classSmartyTest.html#55f5d00910a45546707b6d5e27d9ea73">test_clear_compiled_tpl</a>() {
<a name="l00234"></a>00234         $this-&gt;assertTrue($this-&gt;smarty-&gt;clear_compiled_tpl());
<a name="l00235"></a>00235     }
<a name="l00236"></a>00236     
<a name="l00237"></a>00237     <span class="comment">/* DISPLAY TESTS */</span>
<a name="l00238"></a>00238     
<a name="l00239"></a>00239     <span class="comment">// test that display() executes properly</span>
<a name="l00240"></a><a class="code" href="classSmartyTest.html#ae815867482aa9388b38c1544a91b463">00240</a>     function <a class="code" href="classSmartyTest.html#ae815867482aa9388b38c1544a91b463">test_call_to_display</a>() {
<a name="l00241"></a>00241         ob_start();
<a name="l00242"></a>00242         $this-&gt;smarty-&gt;display('index.tpl');
<a name="l00243"></a>00243         $output = ob_get_contents();
<a name="l00244"></a>00244         ob_end_clean();
<a name="l00245"></a>00245         $this-&gt;assertEquals($output, 'TEST STRING');
<a name="l00246"></a>00246     }
<a name="l00247"></a>00247 
<a name="l00248"></a>00248     <span class="comment">/* FETCH TESTS */</span>
<a name="l00249"></a>00249 
<a name="l00250"></a>00250     <span class="comment">// test that fetch() executes properly</span>
<a name="l00251"></a><a class="code" href="classSmartyTest.html#c230b032bdd8b8f3304e851819900121">00251</a>     function <a class="code" href="classSmartyTest.html#c230b032bdd8b8f3304e851819900121">test_call_to_fetch</a>() {
<a name="l00252"></a>00252         $this-&gt;assertEquals($this-&gt;smarty-&gt;fetch('index.tpl'), 'TEST STRING');
<a name="l00253"></a>00253     }
<a name="l00254"></a>00254     
<a name="l00255"></a>00255     <span class="comment">/* ASSIGN TESTS */</span>
<a name="l00256"></a>00256 
<a name="l00257"></a>00257     <span class="comment">// test assigning a simple template variable</span>
<a name="l00258"></a><a class="code" href="classSmartyTest.html#9dedd14cd2aced48b2ad865dcdc9ae8d">00258</a>     function <a class="code" href="classSmartyTest.html#9dedd14cd2aced48b2ad865dcdc9ae8d">test_assign_var</a>() {
<a name="l00259"></a>00259         $this-&gt;smarty-&gt;assign('foo', 'bar');
<a name="l00260"></a>00260         $this-&gt;assertEquals($this-&gt;smarty-&gt;fetch('assign_var.tpl'), 'bar');
<a name="l00261"></a>00261     }
<a name="l00262"></a>00262 
<a name="l00263"></a>00263     <span class="comment">/* PARSING TESTS */</span>
<a name="l00264"></a>00264     
<a name="l00265"></a>00265     <span class="comment">// test assigning and calling an object</span>
<a name="l00266"></a><a class="code" href="classSmartyTest.html#dcc01fe9087c5df07a7a13167a47d3ca">00266</a>     function <a class="code" href="classSmartyTest.html#dcc01fe9087c5df07a7a13167a47d3ca">test_parse_obj_meth</a>() {
<a name="l00267"></a>00267         $obj  = <span class="keyword">new</span> <a class="code" href="classObj.html">Obj</a>();
<a name="l00268"></a>00268         $this-&gt;smarty-&gt;assign('obj', $obj);
<a name="l00269"></a>00269         $this-&gt;smarty-&gt;assign('foo', 'foo');
<a name="l00270"></a>00270         $this-&gt;assertEquals('foo:2.5
<a name="l00271"></a>00271 2.5:foo
<a name="l00272"></a>00272 2.5:b
<a name="l00273"></a>00273 val:foo
<a name="l00274"></a>00274 foo:val
<a name="l00275"></a>00275 foo:foo
<a name="l00276"></a>00276 one:2
<a name="l00277"></a>00277 foo:foo:b', $this-&gt;smarty-&gt;fetch('parse_obj_meth.tpl'));
<a name="l00278"></a>00278     }
<a name="l00279"></a>00279     
<a name="l00280"></a>00280     <span class="comment">// test assigning and calling an object</span>
<a name="l00281"></a><a class="code" href="classSmartyTest.html#a9ed58f44efd0e460c4d7eda72c7884f">00281</a>     function <a class="code" href="classSmartyTest.html#a9ed58f44efd0e460c4d7eda72c7884f">test_parse_math</a>() {
<a name="l00282"></a>00282         $obj  = <span class="keyword">new</span> <a class="code" href="classObj.html">Obj</a>();
<a name="l00283"></a>00283         $this-&gt;smarty-&gt;assign('obj', $obj);
<a name="l00284"></a>00284         $this-&gt;smarty-&gt;assign('flt', 2.5);
<a name="l00285"></a>00285         $this-&gt;smarty-&gt;assign('items', array(1, 2));
<a name="l00286"></a>00286         $this-&gt;assertEquals('3
<a name="l00287"></a>00287 3.5
<a name="l00288"></a>00288 7
<a name="l00289"></a>00289 11
<a name="l00290"></a>00290 4
<a name="l00291"></a>00291 4.5
<a name="l00292"></a>00292 8
<a name="l00293"></a>00293 12
<a name="l00294"></a>00294 12.5
<a name="l00295"></a>00295 25
<a name="l00296"></a>00296 16
<a name="l00297"></a>00297 20
<a name="l00298"></a>00298 8.5
<a name="l00299"></a>00299 7', $this-&gt;smarty-&gt;fetch('parse_math.tpl'));
<a name="l00300"></a>00300     }
<a name="l00301"></a>00301     
<a name="l00302"></a>00302     <span class="comment">/* CONFIG FILE TESTS */</span>
<a name="l00303"></a>00303 
<a name="l00304"></a>00304     <span class="comment">// test assigning a double quoted global variable</span>
<a name="l00305"></a><a class="code" href="classSmartyTest.html#12b9d16b4a3e13ca2c9fa64fd57333f0">00305</a>     function <a class="code" href="classSmartyTest.html#12b9d16b4a3e13ca2c9fa64fd57333f0">test_config_load_globals_double_quotes</a>() {
<a name="l00306"></a>00306         <span class="comment">// load the global var</span>
<a name="l00307"></a>00307         $this-&gt;smarty-&gt;config_load('globals_double_quotes.conf');
<a name="l00308"></a>00308         <span class="comment">// test that it is assigned</span>
<a name="l00309"></a>00309         $this-&gt;assertEquals($this-&gt;smarty-&gt;_config[0]['vars']['foo'], 'bar');
<a name="l00310"></a>00310     }
<a name="l00311"></a>00311 
<a name="l00312"></a>00312     <span class="comment">// test assigning a single quoted global variable</span>
<a name="l00313"></a><a class="code" href="classSmartyTest.html#c05998c897f17030a874a46af626bc64">00313</a>     function <a class="code" href="classSmartyTest.html#c05998c897f17030a874a46af626bc64">test_config_load_globals_single_quotes</a>() {
<a name="l00314"></a>00314         <span class="comment">// load the global var</span>
<a name="l00315"></a>00315         $this-&gt;smarty-&gt;config_load('globals_single_quotes.conf');
<a name="l00316"></a>00316         <span class="comment">// test that it is assigned</span>
<a name="l00317"></a>00317         $this-&gt;assertEquals($this-&gt;smarty-&gt;_config[0]['vars']['foo'], 'bar');
<a name="l00318"></a>00318     }
<a name="l00319"></a>00319 
<a name="l00320"></a>00320     <span class="comment">// test loading and running modifier.escape.php</span>
<a name="l00321"></a><a class="code" href="classSmartyTest.html#d767d115b213694e4b3840ebb6d0ad9c">00321</a>     function <a class="code" href="classSmartyTest.html#d767d115b213694e4b3840ebb6d0ad9c">test_escape_modifier_get_plugins_filepath</a>() {
<a name="l00322"></a>00322         $filepath = $this-&gt;smarty-&gt;_get_plugin_filepath('modifier', 'escape');
<a name="l00323"></a>00323         $this-&gt;assertTrue($filepath);
<a name="l00324"></a>00324     }
<a name="l00325"></a>00325 
<a name="l00326"></a><a class="code" href="classSmartyTest.html#c49112c143de38bdf690cb4763b98ff0">00326</a>     function <a class="code" href="classSmartyTest.html#c49112c143de38bdf690cb4763b98ff0">test_escape_modifier_include_file</a>() {
<a name="l00327"></a>00327         $filepath = $this-&gt;smarty-&gt;_get_plugin_filepath('modifier', 'escape');
<a name="l00328"></a>00328         $this-&gt;assertTrue(include($filepath));
<a name="l00329"></a>00329     }
<a name="l00330"></a>00330 
<a name="l00331"></a><a class="code" href="classSmartyTest.html#07028e42a3284f2b981a789fc070579d">00331</a>     function <a class="code" href="classSmartyTest.html#07028e42a3284f2b981a789fc070579d">test_escape_modifier_function_exists</a>() {
<a name="l00332"></a>00332         $this-&gt;assertTrue(function_exists('smarty_modifier_escape'));
<a name="l00333"></a>00333     }
<a name="l00334"></a>00334 
<a name="l00335"></a><a class="code" href="classSmartyTest.html#343c8e6bf09a6e119c8af16ab82cb360">00335</a>     function <a class="code" href="classSmartyTest.html#343c8e6bf09a6e119c8af16ab82cb360">test_escape_modifier_escape_default</a>() {
<a name="l00336"></a>00336         $string = smarty_modifier_escape(<span class="stringliteral">"&lt;html&gt;&lt;body&gt;&lt;/body&gt;&lt;/html&gt;"</span>);
<a name="l00337"></a>00337         $this-&gt;assertEquals('&amp;lt;html&amp;gt;&amp;lt;body&amp;gt;&amp;lt;/body&amp;gt;&amp;lt;/html&amp;gt;',
<a name="l00338"></a>00338                             $string);
<a name="l00339"></a>00339     }
<a name="l00340"></a>00340 
<a name="l00341"></a><a class="code" href="classSmartyTest.html#ad255e7b691dd0888f1488b41e6dfa89">00341</a>     function <a class="code" href="classSmartyTest.html#ad255e7b691dd0888f1488b41e6dfa89">test_escape_modifier_escape_html</a>() {
<a name="l00342"></a>00342         $string = smarty_modifier_escape(<span class="stringliteral">"&lt;html&gt;&lt;body&gt;&lt;/body&gt;&lt;/html&gt;"</span>, 'html');
<a name="l00343"></a>00343         $this-&gt;assertEquals('&amp;lt;html&amp;gt;&amp;lt;body&amp;gt;&amp;lt;/body&amp;gt;&amp;lt;/html&amp;gt;',
<a name="l00344"></a>00344                             $string);
<a name="l00345"></a>00345     }
<a name="l00346"></a>00346 
<a name="l00347"></a><a class="code" href="classSmartyTest.html#0ae075aaeeaa4ab2e213d1b22f014563">00347</a>     function <a class="code" href="classSmartyTest.html#0ae075aaeeaa4ab2e213d1b22f014563">test_escape_modifier_escape_htmlall</a>() {
<a name="l00348"></a>00348         $string = smarty_modifier_escape(<span class="stringliteral">"&lt;html&gt;&lt;body&gt;&lt;/body&gt;&lt;/html&gt;"</span>, 'htmlall');
<a name="l00349"></a>00349         $this-&gt;assertEquals('&amp;lt;html&amp;gt;&amp;lt;body&amp;gt;&amp;lt;/body&amp;gt;&amp;lt;/html&amp;gt;',
<a name="l00350"></a>00350                             $string);
<a name="l00351"></a>00351     }
<a name="l00352"></a>00352 
<a name="l00353"></a><a class="code" href="classSmartyTest.html#0d78fd13571dde30504892ce008e2b42">00353</a>     function <a class="code" href="classSmartyTest.html#0d78fd13571dde30504892ce008e2b42">test_escape_modifier_escape_url</a>() {
<a name="l00354"></a>00354         $string = smarty_modifier_escape(<span class="stringliteral">"http://test.com?foo=bar"</span>, 'url');
<a name="l00355"></a>00355         $this-&gt;assertEquals('http%3A%2F%2Ftest.com%3Ffoo%3Dbar', $string);
<a name="l00356"></a>00356     }
<a name="l00357"></a>00357 
<a name="l00358"></a><a class="code" href="classSmartyTest.html#f7d32825d22c5b7f6f2e7f7521e41031">00358</a>     function <a class="code" href="classSmartyTest.html#f7d32825d22c5b7f6f2e7f7521e41031">test_escape_modifier_escape_quotes</a>() {
<a name="l00359"></a>00359         $string = smarty_modifier_escape(<span class="stringliteral">"'\\'\\''"</span>, 'quotes');
<a name="l00360"></a>00360         $this-&gt;assertEquals(<span class="stringliteral">"\\'\\'\\'\\'"</span>, $string);
<a name="l00361"></a>00361     }
<a name="l00362"></a>00362 
<a name="l00363"></a><a class="code" href="classSmartyTest.html#9e237da20ac11e5a137b567b92660e69">00363</a>     function <a class="code" href="classSmartyTest.html#9e237da20ac11e5a137b567b92660e69">test_escape_modifier_escape_hex</a>() {
<a name="l00364"></a>00364         $string = smarty_modifier_escape(<span class="stringliteral">"abcd"</span>, 'hex');
<a name="l00365"></a>00365         $this-&gt;assertEquals('%61%62%63%64', $string);
<a name="l00366"></a>00366     }
<a name="l00367"></a>00367 
<a name="l00368"></a><a class="code" href="classSmartyTest.html#db951d36bfe6100e84d42e681e1817db">00368</a>     function <a class="code" href="classSmartyTest.html#db951d36bfe6100e84d42e681e1817db">test_escape_modifier_escape_hexentity</a>() {
<a name="l00369"></a>00369         $string = smarty_modifier_escape(<span class="stringliteral">"ABCD"</span>, 'hexentity');
<a name="l00370"></a>00370         $this-&gt;assertEquals('&amp;#x41;&amp;#x42;&amp;#x43;&amp;#x44;', $string);
<a name="l00371"></a>00371     }
<a name="l00372"></a>00372 
<a name="l00373"></a><a class="code" href="classSmartyTest.html#ba44f987c1e55e5d8fd69ade088f1e10">00373</a>     function <a class="code" href="classSmartyTest.html#ba44f987c1e55e5d8fd69ade088f1e10">test_escape_modifier_escape_javascript</a>() {
<a name="l00374"></a>00374         $string = smarty_modifier_escape(<span class="stringliteral">"\r\n\\"</span>, 'javascript');
<a name="l00375"></a>00375         $this-&gt;assertEquals('\\r\\n\\\\', $string);
<a name="l00376"></a>00376     }
<a name="l00377"></a>00377 
<a name="l00378"></a>00378 
<a name="l00379"></a><a class="code" href="classSmartyTest.html#1838007c77f88836184aea42195a8635">00379</a>     function <a class="code" href="classSmartyTest.html#1838007c77f88836184aea42195a8635">test_core_is_secure_file_exists</a>() {
<a name="l00380"></a>00380         $file = SMARTY_CORE_DIR . 'core.is_secure.php';
<a name="l00381"></a>00381         $this-&gt;assertTrue(file_exists($file));
<a name="l00382"></a>00382     }
<a name="l00383"></a>00383 
<a name="l00384"></a><a class="code" href="classSmartyTest.html#2cc3588261be880a1aa50c6738a54b7f">00384</a>     function <a class="code" href="classSmartyTest.html#2cc3588261be880a1aa50c6738a54b7f">test_core_is_secure_file_include</a>() {
<a name="l00385"></a>00385         $file = SMARTY_CORE_DIR . 'core.is_secure.php';
<a name="l00386"></a>00386         $this-&gt;assertTrue(include($file));
<a name="l00387"></a>00387     }
<a name="l00388"></a>00388 
<a name="l00389"></a><a class="code" href="classSmartyTest.html#789a2c6d34f633cadbe6525181e38e68">00389</a>     function <a class="code" href="classSmartyTest.html#789a2c6d34f633cadbe6525181e38e68">test_core_is_secure_function_exists</a>() {
<a name="l00390"></a>00390         $this-&gt;assertTrue(function_exists('smarty_core_is_secure'));
<a name="l00391"></a>00391     }
<a name="l00392"></a>00392 
<a name="l00393"></a><a class="code" href="classSmartyTest.html#43b800d994f3757bbf0d4decc41c68fa">00393</a>     function <a class="code" href="classSmartyTest.html#43b800d994f3757bbf0d4decc41c68fa">test_core_is_secure_function_is_secure_true</a>() {
<a name="l00394"></a>00394         $security = $this-&gt;smarty-&gt;security;
<a name="l00395"></a>00395         $this-&gt;smarty-&gt;security = <span class="keyword">true</span>;
<a name="l00396"></a>00396 
<a name="l00397"></a>00397         <span class="comment">/* check if index.tpl is secure (should be true) */</span>
<a name="l00398"></a>00398         $params = array('resource_type' =&gt; 'file',
<a name="l00399"></a>00399                         'resource_base_path' =&gt; dirname(__FILE__) . '/templates',
<a name="l00400"></a>00400                         'resource_name' =&gt; dirname(__FILE__) . '/templates/index.tpl');
<a name="l00401"></a>00401         $this-&gt;assertTrue(smarty_core_is_secure($params, $this-&gt;smarty));
<a name="l00402"></a>00402         $this-&gt;smarty-&gt;security = $security;
<a name="l00403"></a>00403     }
<a name="l00404"></a>00404 
<a name="l00405"></a><a class="code" href="classSmartyTest.html#d5fa52bad88b612d9e75b7f17f72e3fc">00405</a>     function <a class="code" href="classSmartyTest.html#d5fa52bad88b612d9e75b7f17f72e3fc">test_core_is_secure_function_is_secure_false</a>() {
<a name="l00406"></a>00406         $security = $this-&gt;smarty-&gt;security;
<a name="l00407"></a>00407         $this-&gt;smarty-&gt;security = <span class="keyword">true</span>;
<a name="l00408"></a>00408         <span class="comment">/* check if test_cases.php is secure (should be false) */</span>
<a name="l00409"></a>00409         $params = array('resource_type' =&gt; 'file',
<a name="l00410"></a>00410                         'resource_base_path' =&gt; dirname(__FILE__) . '/templates',
<a name="l00411"></a>00411                         'resource_name' =&gt; __FILE__);
<a name="l00412"></a>00412         $this-&gt;assertFalse(smarty_core_is_secure($params, $this-&gt;smarty));
<a name="l00413"></a>00413         $this-&gt;smarty-&gt;security = $security;
<a name="l00414"></a>00414 
<a name="l00415"></a>00415     }
<a name="l00416"></a>00416 
<a name="l00417"></a>00417     <span class="comment">// test constants and security</span>
<a name="l00418"></a><a class="code" href="classSmartyTest.html#34762d6bc14f5be54971c29e39d68667">00418</a>     function <a class="code" href="classSmartyTest.html#34762d6bc14f5be54971c29e39d68667">test_core_is_secure_function_smarty_var_const</a>() {
<a name="l00419"></a>00419         define('TEST_CONSTANT', 'test constant');
<a name="l00420"></a>00420         $this-&gt;assertEquals('test constant', $this-&gt;smarty-&gt;fetch('constant.tpl',
<a name="l00421"></a>00421                                                              null, 'var_const'));
<a name="l00422"></a>00422     }
<a name="l00423"></a>00423 
<a name="l00424"></a><a class="code" href="classSmartyTest.html#d422fc0f4adee89482a6b476acb98ec9">00424</a>     function <a class="code" href="classSmartyTest.html#d422fc0f4adee89482a6b476acb98ec9">test_core_is_secure_function_smarty_var_const_allowed</a>() {
<a name="l00425"></a>00425         $security = $this-&gt;smarty-&gt;security;
<a name="l00426"></a>00426         $security_settings = $this-&gt;smarty-&gt;security_settings;
<a name="l00427"></a>00427         $this-&gt;smarty-&gt;security_settings['ALLOW_CONSTANTS'] = <span class="keyword">true</span>;
<a name="l00428"></a>00428         $this-&gt;smarty-&gt;security = <span class="keyword">true</span>;
<a name="l00429"></a>00429         $this-&gt;assertEquals('test constant', $this-&gt;smarty-&gt;fetch('constant.tpl',
<a name="l00430"></a>00430                                                      null, 'var_const_allowed'));
<a name="l00431"></a>00431         $this-&gt;smarty-&gt;security_settings = $security_settings;
<a name="l00432"></a>00432         $this-&gt;smarty-&gt;security = $security;   
<a name="l00433"></a>00433     }
<a name="l00434"></a>00434 
<a name="l00435"></a><a class="code" href="classSmartyTest.html#c06e86dc140a323cc326a92c8f03b53e">00435</a>     function <a class="code" href="classSmartyTest.html#c06e86dc140a323cc326a92c8f03b53e">test_core_is_secure_function_smarty_var_const_not_allowed</a>() {
<a name="l00436"></a>00436         $security = $this-&gt;smarty-&gt;security;
<a name="l00437"></a>00437         $this-&gt;smarty-&gt;security = <span class="keyword">true</span>;
<a name="l00438"></a>00438         <span class="comment">/* catch errors: */</span>
<a name="l00439"></a>00439         $this-&gt;errorlevel = null;
<a name="l00440"></a>00440         set_error_handler(array(&amp;$this, '<a class="code" href="classSmartyTest.html#8adfe0ee301f830bb21d7bcd8933240e">error_handler</a>'));
<a name="l00441"></a>00441         $this-&gt;smarty-&gt;fetch('constant.tpl', null, 'var_const_not_allowed');
<a name="l00442"></a>00442         restore_error_handler();
<a name="l00443"></a>00443 
<a name="l00444"></a>00444         $this-&gt;assertEquals( $this-&gt;errorlevel, E_USER_WARNING);
<a name="l00445"></a>00445         $this-&gt;smarty-&gt;security = $security;
<a name="l00446"></a>00446     }
<a name="l00447"></a>00447 
<a name="l00448"></a>00448 }
<a name="l00449"></a>00449 
<a name="l00450"></a>00450 ?&gt;
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Sun Jun 18 16:44:49 2006 for SA PHP Application Framework by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.6 </small></address>
</body>
</html>
